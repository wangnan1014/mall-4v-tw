(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0280"],{"9abd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-prod"},[a("avue-crud",{ref:"crud",attrs:{page:t.page,data:t.dataList,"table-loading":t.dataListLoading,permission:t.permission,option:t.tableOption},on:{"search-change":t.searchChange,"selection-change":t.selectionChange,"on-load":t.getDataList},scopedSlots:t._u([{key:"status",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{size:"small"}},[t._v("上架")]):a("el-tag",{attrs:{size:"small"}},[t._v("未上架")])]}},{key:"menu",fn:function(e){return[t.isAuth("prod:prod:update")?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return t.addOrUpdateHandle(e.row.prodId)}}},[t._v("修改")]):t._e(),t.isAuth("prod:prod:delete")?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteHandle(e.row.prodId)}}},[t._v("删除")]):t._e()]}}])},[a("template",{slot:"menuLeft"},[t.isAuth("shop:pickAddr:save")?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){return e.stopPropagation(),t.addOrUpdateHandle()}}},[t._v("新增")]):t._e(),t.isAuth("shop:pickAddr:delete")?a("el-button",{attrs:{type:"danger",size:"small",disabled:t.dataListSelections.length<=0},on:{click:function(e){return t.deleteHandle()}}},[t._v("批量删除")]):t._e()],1)],2)],1)},i=[];const n={border:!0,selection:!0,index:!1,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:350,align:"center",refreshBtn:!0,searchSize:"mini",addBtn:!1,editBtn:!1,delBtn:!1,viewBtn:!1,props:{label:"label",value:"value"},column:[{label:"產品名字",prop:"prodName",search:!0},{label:"商品原價",prop:"oriPrice"},{label:"商品現價",prop:"price"},{label:"商品庫存",prop:"totalStocks"},{label:"產品图片",prop:"pic",type:"upload",width:150,listType:"picture-img"},{width:150,label:"狀態",prop:"status",search:!0,slot:!0,type:"select",dicData:[{label:"未上架",value:0},{label:"上架",value:1}]}]};var r={data(){return{dataForm:{prodName:""},permission:{delBtn:this.isAuth("prod:prod:delete")},dataList:[],page:{total:0,currentPage:1,pageSize:10},dataListSelections:[],dataListLoading:!1,tableOption:n,resourcesUrl:"http://43.142.163.14:8081/images/"}},methods:{getDataList(t,e){this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/prod/prod/page"),method:"get",params:this.$http.adornParams(Object.assign({current:null==t?this.page.currentPage:t.currentPage,size:null==t?this.page.pageSize:t.pageSize},e))}).then(({data:t})=>{this.dataList=t.records;for(const e in this.dataList)if(this.dataList.hasOwnProperty(e)){const t=this.dataList[e];t.imgs=t.imgs.split(",")[0]}this.page.total=t.total,this.dataListLoading=!1})},addOrUpdateHandle(t){this.$router.push({path:"/prodInfo",query:{prodId:t}})},deleteHandle(t){let e=this.getSeleProdIds();t&&e.push(t),this.$confirm(`确定进行[${t?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$http({url:this.$http.adornUrl("/prod/prod"),method:"delete",data:this.$http.adornData(e,!1)}).then(({data:t})=>{this.$message({message:"操作成功",type:"success",duration:1500,onClose:()=>{this.getDataList(this.page)}})})}).catch(()=>{})},searchChange(t){this.getDataList(this.page,t)},selectionChange(t){this.dataListSelections=t},getSeleProdIds(){return this.dataListSelections.map(t=>t.prodId)}}},o=r,l=a("2877"),d=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=d.exports}}]);